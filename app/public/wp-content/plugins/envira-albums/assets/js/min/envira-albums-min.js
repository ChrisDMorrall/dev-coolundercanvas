!function(e){function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}var t={};i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},i.p="",i(i.s=1)}([function(e,i){e.exports=jQuery},function(e,i,t){"use strict";(function(e){var i=function(e){return e&&e.__esModule?e:{default:e}}(t(2)),n=window.envira_albums||{};!function(e,i,t,n,o,a){e(function(){i.envira_albums=a,e(t).on("envira_load",function(i){e(".envira-album-public").each(function(){var i=e(this),t=i.data("album-config"),o=i.data("album-galleries"),r=i.data("lightbox-theme");void 0===a[t.album_id]&&(a[t.album_id]=new n(t,o,r))})}),e(t).trigger("envira_load"),e(t).on("envira_image_lazy_load_complete",function(t){if(void 0!==t&&void 0!==t.image_id&&null!==t.image_id){var n=e("#envira-gallery-item-"+t.gallery_id).find("img#"+t.image_id);if(e("#envira-gallery-item-"+t.gallery_id).find("div.envira-album-public").hasClass("envira-gallery-0-columns"))e(n).closest("div.envira-gallery-item-inner").find("div.envira-gallery-position-overlay").delay(100).show();else{e(n).closest("div.envira-gallery-item-inner").find("div.envira-gallery-position-overlay").delay(100).show();var o=e(n).closest("div.envira-gallery-item-inner").find(".envira-lazy").width(),a=t.naturalHeight/t.naturalWidth,r=t.naturalHeight/o;if(r<a)var l=r;else l=a;var g=100*l;n.closest("div.envira-album-public").parent().hasClass("envira-gallery-theme-sleek")&&(g+=2);var s=e(n).closest("div.envira-gallery-item-inner").find("div.envira-lazy"),c=s.closest("div.envira-gallery-item-inner").find(".envira-album-title").height();if(e(n).closest("div.envira-gallery-item").hasClass("enviratope-item")){s.css("padding-bottom",g+"%").attr("data-envira-changed","true");e(n).closest("div.envira-gallery-item-inner").find(".envira-gallery-position-overlay.envira-gallery-bottom-right").css("bottom",c),e(n).closest("div.envira-gallery-item-inner").find(".envira-gallery-position-overlay.envira-gallery-bottom-left").css("bottom",c)}else{s.css("height","auto").css("padding-bottom","10px").attr("data-envira-changed","true");e(n).closest("div.envira-gallery-item-inner").find(".envira-gallery-position-overlay.envira-gallery-bottom-right").css("bottom",c+10),e(n).closest("div.envira-gallery-item-inner").find(".envira-gallery-position-overlay.envira-gallery-bottom-left").css("bottom",c+10)}e(n).closest("div.envira-gallery-item-inner").find("span.envira-title").delay(1e3).css("visibility","visible"),e(n).closest("div.envira-gallery-item-inner").find("span.envira-caption").delay(1e3).css("visibility","visible"),void 0!==i["envira_container_"+t.gallery_id]&&e("#envira-gallery-"+t.gallery_id).hasClass("enviratope")&&i["envira_container_"+t.gallery_id].on("layoutComplete",function(i,t){e(n).closest("div.envira-gallery-item-inner").find("span.envira-title").delay(1e3).css("visibility","visible"),e(n).closest("div.envira-gallery-item-inner").find("span.envira-caption").delay(1e3).css("visibility","visible")})}}})})}(e,window,document,i.default,envira_gallery,n)}).call(i,t(0))},function(e,i,t){"use strict";(function(i){var t=function(){function e(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(i,t,n){return t&&e(i.prototype,t),n&&e(i,n),i}}(),n=window.enviraLazy,o=function(){function e(i,t,n){!function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e);var o=this;o.data=i,o.galleries=t,o.id=this.get_config("album_id"),o.envirabox_config=n,o.log(o.data),o.log(o.galleries),o.log(o.envirabox_config),o.log(o.id),o.init()}return t(e,[{key:"init",value:function(){var e=this;0==e.get_config("columns")&&(e.justified(),e.get_config("lazy_loading")&&(i(document).on("envira_pagination_ajax_load_completed",function(){i("#envira-gallery-"+e.id).on("jg.complete",function(i){i.preventDefault(),e.load_images()})}),e.load_images()),e.get_config("justified_gallery_theme"),i(document).trigger("envira_gallery_api_justified",e.data)),e.get_config("lazy_loading")&&(e.load_images(),i(window).scroll(function(i){e.load_images()})),parseInt(e.get_config("columns"))>0&&e.get_config("isotope")?(e.enviratopes(),e.get_config("lazy_loading")&&i("#envira-gallery-"+e.id).one("layoutComplete",function(i,t){e.load_images()})):parseInt(e.get_config("columns"))>0&&e.load_images(),(e.get_config("lightbox_enabled")||e.get_config("lightbox"))&&e.lightbox(),i(document).trigger("envira_gallery_api_init",e)}},{key:"load_images",value:function(){var e=this;e.log("running: #envira-gallery-"+e.id),n.run("#envira-gallery-"+e.id),i("#envira-gallery-"+e.id).hasClass("enviratope")&&i("#envira-gallery-"+e.id).enviraImagesLoaded().done(function(){i("#envira-gallery-"+e.id).enviratope("layout")}).progress(function(){i("#envira-gallery-"+e.id).enviratope("layout")})}},{key:"justified",value:function(){i("#envira-gallery-"+this.id).enviraJustifiedGallery({rowHeight:this.get_config("justified_row_height"),maxRowHeight:-1,waitThumbnailsLoad:!0,selector:"> div > div",lastRow:this.get_config("justified_last_row"),border:0,margins:this.get_config("justified_margins")}),i(document).trigger("envira_gallery_api_start_justified",this.data),i("#envira-gallery-"+this.id).css("opacity","1")}},{key:"justified_norewind",value:function(){i("#envira-gallery-"+self.id).enviraJustifiedGallery("norewind")}},{key:"enviratopes",value:function(){var e=this,t={itemSelector:".envira-gallery-item",masonry:{columnWidth:".envira-gallery-item"}};i(document).trigger("envira_gallery_api_enviratope_config",t),i("#envira-gallery-"+e.id).enviratope(t),i("#envira-gallery-"+e.id).enviraImagesLoaded().done(function(){i("#envira-gallery-"+e.id).enviratope("layout")}).progress(function(){i("#envira-gallery-"+e.id).enviratope("layout")}),i(document).trigger("envira_gallery_api_enviratope",e)}},{key:"lightbox",value:function(){var e=this,t=!!e.get_config("thumbnails")&&{autoStart:!0,hideOnClose:!0,position:e.get_lightbox_config("thumbs_position")},n=!!e.get_config("slideshow")&&{autoStart:e.get_config("autoplay"),speed:e.get_config("ss_speed")},o=!e.get_config("fullscreen")||!e.get_config("open_fullscreen")||{autoStart:!0},a="zomm-in-out"==e.get_config("lightbox_open_close_effect")?"zoom-in-out":e.get_config("lightbox_open_close_effect"),r="zomm-in-out"==e.get_config("effect")?"zoom":e.get_config("effect");e.lightbox_options={selector:'[data-envirabox="'+e.id+'"]',loop:e.get_config("loop"),margin:e.get_lightbox_config("margins"),gutter:e.get_lightbox_config("gutter"),keyboard:e.get_config("keyboard"),arrows:e.get_lightbox_config("arrows"),arrow_position:e.get_lightbox_config("arrow_position"),infobar:e.get_lightbox_config("infobar"),toolbar:e.get_lightbox_config("toolbar"),idleTime:60,smallBtn:e.get_lightbox_config("show_smallbtn"),protect:!1,image:{preload:!1},animationEffect:a,animationDuration:300,btnTpl:{smallBtn:e.get_lightbox_config("small_btn_template")},zoomOpacity:"auto",transitionEffect:r,transitionDuration:200,baseTpl:e.get_lightbox_config("base_template"),spinnerTpl:'<div class="envirabox-loading"></div>',errorTpl:e.get_lightbox_config("error_template"),fullScreen:!!e.get_config("fullscreen")&&o,touch:{vertical:!0,momentum:!0},hash:!1,insideCap:e.get_lightbox_config("inner_caption"),capPosition:e.get_lightbox_config("caption_position"),media:{youtube:{params:{autoplay:0}}},wheel:!!e.get_config("mousewheel")&&"auto",slideShow:n,thumbs:t,mobile:{clickContent:function(e,i){return"image"===e.type&&"toggleControls"},clickSlide:function(e,i){return"image"===e.type?"toggleControls":"close"},dblclickContent:!1,dblclickSlide:!1},clickContent:!1,clickSlide:"toggleControls",clickOutside:"close",dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1,onInit:function(t,n){i(document).trigger("envirabox_api_on_init",[e,t,n])},beforeLoad:function(t,n){i(document).trigger("envirabox_api_before_load",[e,t,n])},afterLoad:function(t,n){i(document).trigger("envirabox_api_after_load",[e,t,n])},beforeShow:function(t,n){i("#envirabox-buttons-title").length>0&&n.gallery_title&&(document.getElementById("envirabox-buttons-title").innerHTML="<span>"+n.gallery_title+"</span>"),i(document).trigger("envirabox_api_before_show",[e,t,n])},afterShow:function(t,n){if(void 0==o||void 0==a)var o=!1,a=!1;1!=o&&(i(".envirabox-position-overlay").each(function(){i(this).prependTo(n.$content)}),o=!0),void 0!==e.get_config("keyboard")&&0===e.get_config("keyboard")&&i(window).keypress(function(e){[32,37,38,39,40].indexOf(e.keyCode)>-1&&e.preventDefault()}),i(".envirabox-caption").show(),i(".envirabox-navigation").show(),i(".envirabox-navigation-inside").show(),i(document).trigger("envirabox_api_after_show",[e,t,n])},beforeClose:function(t,n){i(document).trigger("envirabox_api_before_close",[e,t,n])},afterClose:function(t,n){i(document).trigger("envirabox_api_after_close",[e,t,n])},onActivate:function(t,n){i(document).trigger("envirabox_api_on_activate",[e,t,n])},onDeactivate:function(t,n){i(document).trigger("envirabox_api_on_deactivate",[e,t,n])}},i(document).trigger("envirabox_options",e),i("#envira-gallery-wrap-"+e.id+" .envira-gallery-link").on("click",function(t){t.preventDefault(),t.stopPropagation();var n=i(this),o=[],a=n.data("gallery-images"),r=n.data("gallery-sort-ids"),l=void 0!==r&&"gallery"==e.data.gallery_sort?"id":"image",g=void 0!==r&&"gallery"==e.data.gallery_sort?r:a,s=i.envirabox.getInstance();i.each(g,function(e){if("id"==l){(i=a[this]).opts.caption=i.caption}else{var i=this;this.opts.caption=this.caption}if(void 0!==i.link)if(i.link.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),RegExp.$3.indexOf("youtu")>-1){var t=/^.*((youtu.be\/|vimeo.com\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;(n=i.link.match(t))&&11==n[7].length&&(i.video=!0,i.type="iframe",i.src="https://www.youtube.com/embed/"+n[7]+"?autoplay=0")}else if(RegExp.$3.indexOf("vimeo")>-1){var n;t=/^.*((youtu.be\/|vimeo.com\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;(n=i.link.match(t))&&n[7]&&(i.video=!0,i.type="iframe",i.src="https://player.vimeo.com/video/"+n[7])}else i.link.indexOf("mp4")>-1&&(i.video=!0,i.type="video",i.src=i.link,i.opts.videoFormat="video/mp4");o.push(i)}),s||i.envirabox.open(o,e.lightbox_options)})}},{key:"get_config",value:function(e){return this.data[e]}},{key:"get_lightbox_config",value:function(e){return this.envirabox_config[e]}},{key:"get_image",value:function(e){return this.images[e]}},{key:"log",value:function(e){void 0!=envira_gallery.debug&&envira_gallery.debug&&void 0!=e&&console.log(e)}}]),e}();e.exports=o}).call(i,t(0))}]);